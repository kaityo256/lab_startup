<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>latex/README.md</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>

<style>
  .markdown-body {
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
  }
  p.caption{
    display:none;
  }
  img {width: 100%}

  @media (max-width: 767px) {
    .markdown-body {
      padding: 15px;
    }
  }
</style>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://kaityo256.github.io/sevendayshpc/github-markdown.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<article class="markdown-body">
<h1 id="latexのインストール">LaTeXのインストール</h1>
<p>PCにLaTeX(ラテック・レイテック)の処理系をインストールし、実行できるようにする。</p>
<h2 id="インストールとvs-codeの設定">インストールとVS Codeの設定</h2>
<h3 id="windowsの場合">Windowsの場合</h3>
<p>WSL2のUbuntu上で実行することを前提とする。ターミナルで以下を実行する。</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> hwclock <span class="at">-s</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt upgrade</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> texlive-full latexmk</span></code></pre></div>
<p>最初に実行する<code>sudo hwclock -s</code>は、WSL2の時計を直す処理だ。WSL2はよく時計がずれるのでたまに実行すると良い。その後のインストールにはかなり時間がかかる(30分〜1時間?)ので、時間に余裕があるときに実行すること。インストール完了後、<code>latex -v</code>と<code>platex -v</code>を実行し、それぞれ以下のような表示がされれば正しくインストールされている。</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> latex <span class="at">-v</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pdfTex</span> 3.14159265-2.6-1.40.20 <span class="er">(</span><span class="ex">Tex</span> Live 2019/Debian<span class="kw">)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">snip</span><span class="kw">)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> platex <span class="at">-v</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">e-pTeX</span> 3.14159265-p3.8.2-190908-2.6 <span class="er">(</span><span class="ex">utf8.euc</span><span class="kw">)</span> <span class="kw">(</span><span class="ex">TeX</span> Live 2019/Debian<span class="kw">)</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">snip</span><span class="kw">)</span></span></code></pre></div>
<p>また、修士論文執筆時に使うので、pdftkも入れておこう。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> pdftk-java</span></code></pre></div>
<p>以下を実行し、バージョンが表示されれば正しくインストールされている。</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pdftk <span class="at">--version</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftk</span> port to java 3.0.9 a Handy Tool for Manipulating PDF Documents</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">2017-2018</span> Marc Vinyals <span class="at">-</span> https://gitlab.com/pdftk-java/pdftk</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">2003-2013</span> Steward and Lee, LLC.</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftk</span> includes a modified version of the iText library.</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">1999-2009</span> Bruno Lowagie, Paulo Soares, et al.</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="ex">This</span> is free software<span class="kw">;</span> <span class="ex">see</span> the source code for copying conditions. There is</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">NO</span> warranty, not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></code></pre></div>
<h3 id="macの場合">Macの場合</h3>
<p>ターミナルを開き、以下を実行せよ。実行ディレクトリを趣味で<code>~/build</code>としているが、どこでも良い。</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> build</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> build</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> http://ftp.jaist.ac.jp/pub/CTAN/systems/texlive/tlnet/install-tl-unx.tar.gz</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> xvzf install-tl-unx.tar.gz</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> install-tl-20<span class="pp">*</span>  </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ./install-tl <span class="at">-no-gui</span>  <span class="at">-repository</span> https://ftp.jaist.ac.jp/pub/CTAN/systems/texlive/tlnet/</span></code></pre></div>
<p>すると、以下のような画面で入力待ちとなる。</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a> &lt;O&gt; options:</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>   [ ] use letter size instead of A4 by default</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>   [X] allow execution of restricted list of programs via \write18</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>   [X] create all format files</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>   [X] install macro/font doc tree</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>   [X] install macro/font source tree</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>   [ ] create symlinks to standard directories</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a> &lt;V&gt; set up for portable installation</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>Actions:</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a> &lt;I&gt; start installation to hard disk</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a> &lt;P&gt; save installation profile to &#39;texlive.profile&#39; and exit</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a> &lt;Q&gt; quit</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>Enter command: </span></code></pre></div>
<p>ここでは<code>O</code>(大文字のオー)を入力してエンターを押す。するとオプションのカスタマイズ画面になる。</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>===============================================================================</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>Options customization:</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a> &lt;P&gt; use letter size instead of A4 by default: [ ]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a> &lt;E&gt; execution of restricted list of programs: [X]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a> &lt;F&gt; create all format files:                  [X]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a> &lt;D&gt; install font/macro doc tree:              [X]</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a> &lt;S&gt; install font/macro source tree:           [X]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a> &lt;L&gt; create symlinks in standard directories:  [ ]</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            binaries to: </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            manpages to: </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                info to: </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>Actions: (disk space required: 7416 MB)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a> &lt;R&gt; return to main menu</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a> &lt;Q&gt; quit</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>Enter command: </span></code></pre></div>
<p>ここで、<code>L</code>を入力すると、シンボリックリンクを作成する場所を聞かれるので、全てデフォルトのままエンターを押す。</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>New value for binary directory [/usr/local/bin]:  #エンターを入力</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>New value for man directory    [/usr/local/man]:  #エンターを入力</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>New value for info directory   [/usr/local/info]: #エンターを入力</span></code></pre></div>
<p>すると、オプションのカスタマイズ画面に戻るので、ここで<code>R</code>を入力してメイン画面に戻る。</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a> &lt;O&gt; options:</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>   [ ] use letter size instead of A4 by default</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>   [X] allow execution of restricted list of programs via \write18</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>   [X] create all format files</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>   [X] install macro/font doc tree</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>   [X] install macro/font source tree</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>   [X] create symlinks to standard directories</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a> &lt;V&gt; set up for portable installation</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>Actions:</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a> &lt;I&gt; start installation to hard disk</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a> &lt;P&gt; save installation profile to &#39;texlive.profile&#39; and exit</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a> &lt;Q&gt; quit</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>Enter command: </span></code></pre></div>
<p>こんな画面になり、「create symlinks to standard
directories」にチェックが入っていることを確認して、<code>I</code>を入力してインストールを開始する。</p>
<p>フルインストールに <strong>30分ほど</strong>
かかるので、時間に余裕がある時に行うこと。</p>
<p>インストール完了後、<code>latex -v</code>と<code>platex -v</code>を実行し、それぞれ以下のような表示がされれば正しくインストールされている。</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> latex <span class="at">-v</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pdfTeX</span> 3.141592653-2.6-1.40.23 <span class="er">(</span><span class="ex">TeX</span> Live 2022/dev<span class="kw">)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">snip</span><span class="kw">)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> platex <span class="at">-v</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="ex">e-pTeX</span> 3.141592653-p3.9.0-210218-2.6 <span class="er">(</span><span class="ex">utf8.euc</span><span class="kw">)</span> <span class="kw">(</span><span class="ex">TeX</span> Live 2021<span class="kw">)</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">snip</span><span class="kw">)</span></span></code></pre></div>
<p>また、修士論文執筆時に使うので、pdftkも入れておこう。</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install pdftk-java</span></code></pre></div>
<p>以下のコマンドを実行し、バージョンが表示されれば正しくインストールされている。</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pdftk <span class="at">--version</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftk</span> port to java 3.3.3 a Handy Tool for Manipulating PDF Documents</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">2017-2018</span> Marc Vinyals <span class="at">-</span> https://gitlab.com/pdftk-java/pdftk</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">2003-2013</span> Steward and Lee, LLC.</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftk</span> includes a modified version of the iText library.</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Copyright</span> <span class="er">(</span><span class="ex">c</span><span class="kw">)</span> <span class="ex">1999-2009</span> Bruno Lowagie, Paulo Soares, et al.</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="ex">This</span> is free software<span class="kw">;</span> <span class="ex">see</span> the source code for copying conditions. There is</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="ex">NO</span> warranty, not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span></code></pre></div>
<h3 id="コンパイルの確認">コンパイルの確認</h3>
<p>適当なディレクトリ(例えば<code>~/temp</code>)を作り、そこに移動せよ。</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> temp</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> temp</span></code></pre></div>
<p>そこで、以下の内容の<code>test.tex</code>を作成せよ。ターミナルで<code>code test.tex</code>と入力すればVS
Codeが開くので、そこで以下をコピペ、保存する。</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>Hello <span class="fu">\LaTeX</span>.</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="ss">\[</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="ss">E = mc^2</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="ss">\]</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>この状態で、コンパイルする。</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pdflatex</span> test.tex</span></code></pre></div>
<p>すると、同じディレクトリに<code>test.pdf</code>というファイルができたはずなので開く。以下のような内容になっていれば成功である。</p>
<figure>
<img src="fig/test_pdf.png" alt="test_pdf.png" />
<figcaption aria-hidden="true">test_pdf.png</figcaption>
</figure>
<p>次に、日本語のLaTeXファイルのコンパイルを確認する。</p>
<p>以下の内容の<code>testj.tex</code>を作成せよ。</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">jarticle</span>}</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>こんにちは <span class="fu">\LaTeX</span>.</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="ss">\[</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="ss">E = mc^2</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ss">\]</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p><code>documentclass</code>の中身が<code>article</code>から<code>jarticle</code>になっていることに注意。これをコンパイルし、PDFに変換する。英語だけの文書の場合は<code>pdflatex</code>一発でできたが、日本語は諸事情によりいろいろ面倒くさい。まず、<code>platex</code>によりDVIファイルを作る。</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">platex</span> testj.tex</span></code></pre></div>
<p>これにより<code>testj.dvi</code>が作成されたはずなので、これをPDFに変換する。</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dvipdfmx</span> testj.dvi</span></code></pre></div>
<p>正しく処理されていれば以下のようなPDFファイルが作成されたはずである。</p>
<figure>
<img src="fig/testj_pdf.png" alt="testj_pdf.png" />
<figcaption aria-hidden="true">testj_pdf.png</figcaption>
</figure>
<h3 id="latexmkのセットアップ">latexmkのセットアップ</h3>
<p>さて、LaTeXは、リファレンスの解決、目次の作成などで何度かコンパイルする必要がある。また、PDFにするのにいちいち<code>dvipdfmx</code>を呼び出すのも面倒だ。そこで<code>latexmk</code>というツールを使ってコンパイルとPDF作成を自動化する。そのための設定ファイルを作ろう。</p>
<p>ホームディレクトリに、以下の内容の<code>.latexmkrc</code>ファイルを作成する。端末を開き、ホームディレクトリで</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> .latexmkrc</span></code></pre></div>
<p>を実行してVS Codeを開いて、以下をコピペして保存せよ。</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode perl"><code class="sourceCode perl"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">#!/usr/bin/env perl</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="dt">$latex</span> = <span class="ot">&#39;</span><span class="ss">platex -synctex=1 %O %S</span><span class="ot">&#39;</span>;</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="dt">$bibtex</span> = <span class="ot">&#39;</span><span class="ss">pbibtex %O %B</span><span class="ot">&#39;</span>;</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="dt">$makeindex</span> = <span class="ot">&#39;</span><span class="ss">memindex %O -o %D %S</span><span class="ot">&#39;</span>;</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="dt">$pdf_mode</span> = <span class="dv">3</span>;</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="dt">$dvipdf</span> = <span class="ot">&#39;</span><span class="ss">dvipdfmx -V 7 %O -o %D %S</span><span class="ot">&#39;</span>;</span></code></pre></div>
<p>この状態で、先程作った　<code>testj.tex</code>のあるディレクトリに移動し、<code>testj.dvi</code>や<code>testj.pdf</code>を削除してから<code>latexmk</code>を実行してみよう。</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">latexmk</span> <span class="at">-C</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">latexmk</span> testj</span></code></pre></div>
<p>一気にPDFまで作成されるはずだ。なお、LaTeXは多くの中間ファイル(dviやaux、logなど)を作成するが、<code>latexmk -C</code>により一気に削除することができる。</p>
<h3 id="vs-codeの設定">VS Codeの設定</h3>
<p>次にVS
CodeからTeXをコンパイル、プレビューできるようにしよう。まず、拡張機能「LaTeX
Workshop」をインストールせよ。拡張機能のメニューを開き、「latex」で検索するとLaTeX
Workshopが表示されるはずなので、「インストール」をクリックする。</p>
<figure>
<img src="fig/latex_workshop.png" alt="latex-tools" />
<figcaption aria-hidden="true">latex-tools</figcaption>
</figure>
<p>「Code」メニューの「基本設定」→「設定」から設定メニューを開く。そこで「latex.tools」と検索すると「Latex-workshop
› Latex:
Tools」が見つかる(見つからない場合はVSCodeを再起動せよ)ので、その下にある「setting.jsonで編集」をクリック。</p>
<figure>
<img src="fig/latex_tools.png" alt="latex-tools" />
<figcaption aria-hidden="true">latex-tools</figcaption>
</figure>
<p>すると、以下のような設定が見つかる。</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>    <span class="er">&quot;latex-workshop.latex.tools&quot;:</span> <span class="ot">[</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-synctex=1&quot;</span><span class="ot">,</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-interaction=nonstopmode&quot;</span><span class="ot">,</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-file-line-error&quot;</span><span class="ot">,</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-pdf&quot;</span><span class="ot">,</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-outdir=%OUTDIR%&quot;</span><span class="ot">,</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;%DOC%&quot;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;env&quot;</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span></code></pre></div>
<p>このうち、“args”の項目を’-interaction=nonstopmod’だけ残して削除する。</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>    <span class="er">&quot;latex-workshop.latex.tools&quot;:</span> <span class="ot">[</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-interaction=nonstopmode&quot;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;env&quot;</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span></code></pre></div>
<p>もし、<code>latex-workshop.latex.tools</code>の設定が見つからなかった場合は、以下を追加する。</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>    <span class="er">&quot;latex-workshop.latex.tools&quot;:</span> <span class="ot">[</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;args&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;-interaction=nonstopmode&quot;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;env&quot;</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span></code></pre></div>
<p>JSONはカンマ区切りなので、他に項目がある場合はカンマを入れるのを忘れないこと。例えば、フォントサイズなどを指定していたら、<code>settings.json</code>は以下のようになる。</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;security.workspace.trust.enabled&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;editor.fontSize&quot;</span><span class="fu">:</span> <span class="dv">16</span><span class="fu">,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;latex-workshop.latex.tools&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;command&quot;</span><span class="fu">:</span> <span class="st">&quot;latexmk&quot;</span><span class="fu">,</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;env&quot;</span><span class="fu">:</span> <span class="fu">{}</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>この状態で、この状態で、先程作った<code>testj.tex</code>をVS
Codeで開こう。TeXファイルを開いた状態で「保存」をするとビルドが走る。なお、Macでは保存時に「Formatting
failed. Please refer to LaTeX Workshop Output for
details.」というエラーが出ることがある。その場合はターミナルで</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">cpan</span> install Log::Log4perl YAML/Tiny.pm File/HomeDir.pm</span></code></pre></div>
<p>を実行すると直る場合がある。</p>
<p>無事にビルドが走ったら、PDFをプレビューをしよう。コマンドパレットから「LaTeX
Workshop: View LaTeX PDF
file」を選ぶか、WindowsならCtrl+Alt+V，MacならCmd+alt+Vで、右側にPDFが表示される。</p>
<p>以後、TeXソースファイルを修正し、保存するたびにプレビューが更新される。ただし、保存のたびにビルドが走る設定では、エラーが出た時に面倒なので、自動ビルドは外すことを推奨する。自動ビルドを外すには、「設定」で<code>autobuild.run</code>で検索して出てくる「Latex-workshop
› Latex › Auto Build:
Run」のドロップダウンリストを<code>onFileChange</code>から<code>never</code>に変更せよ。</p>
<figure>
<img src="fig/autobuild.png" alt="autobuild" />
<figcaption aria-hidden="true">autobuild</figcaption>
</figure>
<p>以後、ビルドしたいタイミングで、ターミナルから<code>latexmk</code>を実行するか、VSCodeのLaTeX
Workshop拡張機能の「Build LaTeX project」を実行すると良い。</p>
<figure>
<img src="fig/build_project.png" alt="build project" />
<figcaption aria-hidden="true">build project</figcaption>
</figure>
<h2 id="latexの基本">LaTeXの基本</h2>
<p>適当なディレクトリ(例えば<code>~/temp/textest</code>)を作り、そこに移動して、ディレクトリをVS
Codeで開く。</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> temp</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> temp</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> textest</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> textest</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> .</span></code></pre></div>
<p>その状態でファイルを新規作成し、以下の内容を記述、<code>test.tex</code>という名前で保存して、コンパイルとプレビューができることを確認せよ。</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">jarticle</span>}</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>以下、プレビュー画面を右に表示したままこの文章を修正していく。</p>
<p>LaTeXのコマンドは、大きく分けて二つにわかれる。一つは「」の形をとるものだ。Pythonで言えば関数のようなものであり、{}の中に引数を取る。</p>
<p>もう一つは<code>\begin{hoge}</code>と<code>\end{hoge}</code>で囲まれる領域を作るもので、「環境」と呼ばれる。例えば<code>\begin{document}</code>から<code>\end{document}</code>はdocument環境を作り、その中に本文を記述する。</p>
<p>なお、<code>\documentclass{jarticle}</code>と<code>\begin{document}</code>の間を「プリアンブル」と呼び、必要なパッケージの宣言をする(Pythonのimportにあたる)。</p>
<h3 id="文章と修飾">文章と修飾</h3>
<p>LaTeXの文章はそのままかけば良い。ただし、一度の改行は同じパラグラフとみなされる。</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>さようなら。</span></code></pre></div>
<p>これをコンパイルすると、「こんにちは。さようなら。」と続けて表示される。別のパラグラフにしたい場合は、</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>さようなら。</span></code></pre></div>
<p>と二回の改行をいれる。なお、二回以上改行をいれても無視される。</p>
<p>強調のために太字にしたい場合は、その部分を<code>\textbf{}</code>で囲む。</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>さようなら。次の部分を<span class="fu">\textbf</span>{強調}します。</span></code></pre></div>
<h3 id="数式と参照">数式と参照</h3>
<p>LaTeXでは数式は<code>$</code>で囲まれたインライン数式と、<code>\[</code>と<code>\]</code>で囲まれた別行立ての数式がある。</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>文中の数式は<span class="ss">$E=mc^2$</span>のように書く。</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>別行立ての数式は</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="ss">\[</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="ss"> E = mc^2   </span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="ss">\]</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>と書く。</span></code></pre></div>
<p>別行立ての数式は<code>equation</code>環境を使うと式番号がつく。</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">equation</span>}</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ss">E=mc^2</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">equation</span>}</span></code></pre></div>
<p>式番号を文中で参照するためには、式に<code>\label{ラベル名}</code>でラベルをつけ、文中で<code>\ref{ラベル名}</code>で参照する。ラベル名は自由に付けて良いが、慣習的に式の場合は<code>eq:ラベル</code>、図の場合は<code>fig:ラベル名</code>、テーブルの場合は<code>tbl:ラベル名</code>などと、名前空間を使うことが多い。今回は<code>eq:test</code>という名前のラベルをつけてみよう。</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">equation</span>}</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ss">E=mc^2 </span><span class="sc">\label</span><span class="ss">{eq:test}</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">equation</span>}</span></code></pre></div>
<p>この状態で、この式の後に以下の文章を挿入し、コンパイルせよ。</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>数式(<span class="kw">\ref</span>{<span class="ex">eq:test</span>})を参照のこと。</span></code></pre></div>
<p><code>\ref{ラベル名}</code>は、対応する数式の数字に変換されるため、括弧にいれたければ上記のように<code>(\ref{ラベル名})</code>とする必要があることに注意。</p>
<p>このように、LaTeXにはどの式をどこで参照するかを解決する仕組みが備わっている。ラベルを書くのが面倒だからといって「式(1)のように」などと式番号を直接書かないこと。絶対に後でごちゃごちゃになって後悔することになる。<code>\[ \]</code>によるラベル無し数式と、<code>equation</code>環境によるラベルあり数式の使い分けだが、とりあえずラベル無しで書いておいて、後で参照が必要になったら<code>equation</code>環境に書き直すのが良いだろう。</p>
<h3 id="図の挿入">図の挿入</h3>
<p>LaTeXでは図を挿入することができる。LaTeXでは様々なフォーマットの図を扱えるが、原則としてPDFで貼り付けるのが良いだろう。</p>
<p>適当なPythonコードを書いてPDFを作成しよう。TeXファイルと同じディレクトリに<code>test.py</code>を作成し、以下を入力せよ。</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode py"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>matplotlib.use(<span class="st">&#39;Agg&#39;</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>np.pi, <span class="dv">2</span><span class="op">*</span>np.pi<span class="op">*</span><span class="fl">0.01</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.sin(x)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>plt.plot(x,y)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">&quot;sin.pdf&quot;</span>)</span></code></pre></div>
<p>これを</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> test.py</span></code></pre></div>
<p>として実行すると<code>sin.pdf</code>ができる。これをLaTeXに取り込むには、まずプリアンブルで<code>graphicx</code>パッケージを取り込む。</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">jarticle</span>}</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>[dvipdfmx]{<span class="ex">graphicx</span>}</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span></code></pre></div>
<p><code>graphics</code>ではなく<code>graphicx</code>(最後がx)であることに注意。この状態で、</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\includegraphics</span>{<span class="ex">sin.pdf</span>}</span></code></pre></div>
<p>と入力し、ビルドしてみよ。おそらく警告が一つ出たはずだ。左下にある(i)マークをクリックすると</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>Overfull \hbox (145.3509pt too wide)</span></code></pre></div>
<p>という表示が出ている。これは「表示領域から何かがはみ出ているよ」という警告で、LaTeXを使っていると良く見かけるものだ。今回のケースでは図が大きすぎるために表示領域からはみ出してしまっているので、小さくしよう。サイズを指定するためには、<code>\includegraphics</code>にオプションとして<code>width</code>を指定する。</p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span></code></pre></div>
<p>これで警告は消えるはずだ。</p>
<p>さて、科学技術論文において、図を生で入れることはほとんどない。多くの場合「図番号」と「図の説明」を入れることだろう。そのためには<code>figure</code>環境を使う。先ほどの<code>includegraphics</code>命令を<code>figure</code>環境の中にいれよう。</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">figure</span>}</span></code></pre></div>
<p>この状態でビルドすると、図が文中から別の場所(おそらく上部)に移動したはずだ。さて、この図に説明をつけよう。そのためには<code>figure</code>環境に<code>caption</code>命令を入れる。</p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\caption</span>{正弦波のグラフ。}</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">figure</span>}</span></code></pre></div>
<p>ビルドすると、図の説明(キャプション)とともに、図番号が自動で入ったはずだ。この図もラベルをつけて参照することができる。</p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\caption</span>{正弦波のグラフ。}</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="kw">\label</span>{<span class="ex">fig:sin</span>}</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">figure</span>}</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>正弦波のグラフを図<span class="fu">\ref</span>{fig:sin}に示す。</span></code></pre></div>
<p>上記をビルドして、「正弦波のグラフを図1に示す。」となれば成功だ。</p>
<p>繰り返しになるが、式番号や図番号については <strong>必ず</strong>
ラベルによる参照を行うこと。数が少ないからといって直接書いていると後で泣きを見る。どうせVS
Codeその他のLaTeXに対応したエディタには補完機能があるため、さほど手間ではない。</p>
<p>なお、<code>\includegraphics</code>だけの場合は、その位置に図が挿入されるが、<code>figure</code>環境を使うと図の挿入場所は自動で決められる。基本的にはLaTeXに任せておけば良いが、どうしても「ページの上が良い」「下が良い」「絶対ここが良い」といった希望がある場合は、オプションで希望をLaTeXに伝えることができる。例えば</p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}[htbp]</span></code></pre></div>
<p>とすると、順番に「この場所(here, h)」「上(top, t)」「下(bottom,
b)」「独立したページ (page,
p)」を意味しており、記述した順番で挿入を試みる。試しに上記のオプション<code>[htbp]</code>をつけてビルドしなおしてみよ。おそらく<code>h</code>が優先され、<code>\includegraphics</code>の場所に図が移動すると思われる。</p>
<p>また、デフォルトでは、図はページの左側に寄せられてしまうため、図が小さいと見栄えが悪い。その場合は<code>\includegraphics</code>の直前に<code>\centering</code>を入れると良い。</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}[htbp]</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\centering</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\caption</span>{正弦波のグラフ。}</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">\label</span>{<span class="ex">fig:sin</span>}</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">figure</span>}</span></code></pre></div>
<p>図が中央寄せになったはずである。</p>
<h3 id="参考文献の入れ方">参考文献の入れ方</h3>
<p>科学技術論文では、何より「引用」が重要である。その研究分野においてどこまで何がわかっていて、これから使う手法は誰が開発、提案したもので、得られた結果は先行研究と比較してどうだったのかを、全て文献を引用しながら明らかにしなければならない。そのために論文の最後には「参考文献」として論文や書籍を並べ、本文中では番号を使って引用する。この際、本文中に出てこない論文を「参考文献」に入れてはならず、さらに「出現順」「年号順」「アルファベット順」など、適切な順序で並べる必要がある。これを手でやっていては必ず破綻するが、当然のことながらLaTeXに任せれば自動でやってくれる。</p>
<p>LaTeXで参考文献を入れるには、手で入れる方法とbibtexにより半自動で入れる方法がある。原則として論文はbibtexを使うことを推奨するが、まずは手で入れる方法を紹介する。</p>
<h4 id="手で入れる方法">手で入れる方法</h4>
<p>まず、以下のような文献リストを文中の最後(<code>\end{document}</code>)に入れる。</p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">thebibliography</span>}{99}</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\bibitem</span>{okumura2020} 奥村 晴彦、黒木 裕介、LaTeX2ε美文書作成入門、技術評論社、2020.</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">thebibliography</span>}</span></code></pre></div>
<p>ここで<code>{99}</code>とあるのは、文献番号が何桁になるかをLaTeXに教えるためのもので、この場合は「二桁ですよ」と教えている。十件以内の場合は<code>{9}</code>、百件以上引用する場合は<code>{999}</code>などと指定するが、通常は<code>{99}</code>で良いだろう。</p>
<p>この状態でビルドすると、「参考文献」という欄が作成されたはずだ。</p>
<p>文献を文中で引用するには、<code>\cite{ラベル}</code>コマンドを使う。文献のラベルは<code>\bibitem{ラベル} 内容</code>という形式で指定できる。<code>\ref{ラベル}</code>と異なり、慣習的にこちらは名前空間を使わないようだ(もちろん使っても良い)。個人的には「筆頭著者名+出版年」を使っているが、個人で分かりやすければどのような名前をつけても自由だ。この場合は<code>okumura2020</code>が文献ラベルである。早速、引用してみよう。<code>thebibliography</code>環境の直前あたりに以下を記述せよ。</p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>本稿の執筆にはLaTeX<span class="fu">\cite</span>{okumura2020}を用いる。</span></code></pre></div>
<p>これでコンパイルすると</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>本稿の執筆にはLaTeX[1]を用いる。</span></code></pre></div>
<p>となるはずだ。</p>
<h4 id="bibtexを使う方法">bibtexを使う方法</h4>
<p>先ほど、本文中に言及がないにも関わらず、文献リストに「LaTeX2ε美文書作成入門」が表示されていた。原則として文中で言及していない文献は文献リストに掲載してはならない。しかし、引用文献を追加したり削除したりしているうちに、どれに言及してどれに言及していないかの管理が面倒になるだろう。そこで、bibtexというファイルを使って文献リストを管理する。</p>
<p>まずは文献ファイルを作ろう。TeXファイルと同じディレクトリに<code>reference.bib</code>というファイルを作成し、以下の内容を記述せよ。</p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>@book{okumura2020,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  author    = {奥村 晴彦 and 黒木 裕介},</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  title     = {LaTeX2ε美文書作成入門},</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  publisher = {技術評論社},</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  year      = {2020}</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>ここで<code>@book</code>とあるのはbibtexエントリと呼ばれ、種類ごとに必須となる項目が異なる。<code>book</code>の場合は著者(author)、タイトル(title)、出版社(publisher)、出版年(year)が必須項目だ。<code>@book</code>の直後に文献ラベルをつける。著者名は<code>and</code>で区切ること。</p>
<p>このBibTeXファイルを利用するには、先ほどの<code>thebibliography</code>の代わりに以下を指定する。手で書いた文献リストはコメントアウトしておこう。LaTeXは<code>%</code>から行末まではコメントと解釈されて無視される。</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">%\begin{thebibliography}{99}</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">%    \bibitem{okumura2020} 奥村 晴彦、黒木 裕介、LaTeX2ε美文書作成入門、技術評論社、2020.</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">%\end{thebibliography}</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="bu">\bibliographystyle</span>{<span class="ex">junsrt</span>}</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="bu">\bibliography</span>{<span class="ex">reference</span>}</span></code></pre></div>
<p><code>\bibliographystyle{junsrt}</code>は文献リストのスタイルをあらわす。<code>junsrt</code>は出現順にソートせよ、という意味だ。<code>\bibliography{reference}</code>はBibTeXファイルを指定する。拡張子を省くことに注意せよ。</p>
<p>この状態でビルドすると、参考文献が更新されるはずだ。</p>
<p>さて、BibTeXファイルを手で書くのは手間だ。多くの場合、出版社はbibtexエントリをエクスポートする機能を持っている。試してみよう。</p>
<p>適当な論文、例えば<a
href="https://aip.scitation.org/doi/10.1063/1.4903811">J. Chem. Phys.
141, 234703
(2014)</a>のページに行ってみよう。これはアメリカ物理学協会(AIP)のJ.
Chem.
Phys.というジャーナルに掲載された論文だ。このページの上部に「TOOLS」というタブがあるのでクリックすると「Download
Citation」という項目があるので選ぶ。「Include」では「Citation for this
article (この記事だけ)」、「Format」では「BibTex」を選んで「DOWNLOAD
ARTICLE CITATION
DATA」をクリックすると、以下のようなbibtexエントリがダウンロードできる。</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>@article{doi:10.1063/1.4903811,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>author = {Watanabe,Hiroshi  and Suzuki,Masaru  and Inaoka,Hajime  and Ito,Nobuyasu },</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>title = {Ostwald ripening in multiple-bubble nuclei},</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>journal = {The Journal of Chemical Physics},</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>volume = {141},</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>number = {23},</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>pages = {234703},</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>year = {2014},</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>doi = {10.1063/1.4903811},</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>URL = { </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>        https://doi.org/10.1063/1.4903811</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>},</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>eprint = { </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>        https://doi.org/10.1063/1.4903811</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>これを先ほどの<code>reference.bib</code>ファイルに追加し、<code>test.tex</code>に以下のような文章を追加しよう。</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>渡辺らは気泡生成のシミュレーションを行った<span class="fu">\cite</span>{doi:10.1063/1.4903811}。</span></code></pre></div>
<p>再度ビルドすると、</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>渡辺らは気泡生成のシミュレーションを行った[2].</span></code></pre></div>
<p>などと表示されたはずだ。</p>
<p>せっかくなので別の出版社も試してみよう。今度は日本物理学会の論文、<a
href="https://journals.jps.jp/doi/10.7566/JPSJ.88.024004">J. Phys. Soc.
Jpn. 88, 024004 (2019)</a>のサイトに行ってみる。右の欄に「Download
Citation」とあるのでそこをクリックすると、Citation
Managerのページに飛ぶので、Formatとして「BibTex」を選んで「Download
citation
data」をクリックする。すると以下のようなデータがダウンロードできる。</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>@article{doi:10.7566/JPSJ.88.024004,</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>author = {Watanabe ,Hiroshi and Morita ,Satoshi and Todo ,Synge and Kawashima ,Naoki},</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>title = {Fast Algorithm for Generating Random Bit Strings and Multispin Coding for Directed Percolation},</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>journal = {Journal of the Physical Society of Japan},</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>volume = {88},</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>number = {2},</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>pages = {024004},</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>year = {2019},</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>doi = {10.7566/JPSJ.88.024004},</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>URL = { </span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>        https://doi.org/10.7566/JPSJ.88.024004</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>},</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>eprint = { </span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>        https://doi.org/10.7566/JPSJ.88.024004</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>いま、文献ラベルとしてDOIである<code>doi:10.7566/JPSJ.88.024004</code>が指定されているが、これでは分かりづらいので、<code>watanabe2019</code>に変更しよう。</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>@article{watanabe2019,</span></code></pre></div>
<p>この状態で<code>reference.bib</code>に追加し、texファイルに</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>渡辺らはランダムビット生成を行った<span class="fu">\cite</span>{watanabe2019}。</span></code></pre></div>
<p>という文章を追加してコンパイルする。</p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode txt"><code class="sourceCode default"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>渡辺らはランダムビット生成を行った[2]。</span></code></pre></div>
<p>と、文献番号が解決されたはずだ。番号は出現順に振られるため、先ほどの文章と順序を入れ替えると番号も変わる。</p>
<p>まとめると、参考文献を管理する際は、</p>
<ul>
<li>BibTeXファイルを使う</li>
<li>bibitemエントリはpublisherからダウンロードする</li>
<li>文献ラベルがDOIになっていることが多いので、自分でわかりやすい名前に変える</li>
<li>BibTeXファイルに追加する</li>
</ul>
<p>という手順を取ると良い。BibTeXファイルは手で管理しても良いが、<a
href="http://www.jabref.org/">JabRef</a>や<a
href="https://www.mendeley.com/">Mendeley</a>といった文献管理ソフトで管理したほうが効率的であろう。</p>
<p>いずれにせよ、文献ファイルはTeXファイルと一緒に必ずGitその他のVCSで管理すること。</p>
<h3 id="セクション">セクション</h3>
<h4 id="セクションの入れ方">セクションの入れ方</h4>
<p>論文には「イントロダクション」「背景」「手法」「結果」といった構造がある。その構造を表すのにセクション(節)を使う。いま、<code>test.tex</code>は以下のようになっているはず(多少違っていてもかまわないし、面倒なら以下をコピペしなおして良い)。</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">jarticle</span>}</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>[dvipdfmx]{<span class="ex">graphicx</span>}</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>さようなら。次の部分を<span class="fu">\textbf</span>{強調}します。</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>文中の数式は<span class="ss">$E=mc^2$</span>のように書く。</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>別行立ての数式は</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="ss">\[</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="ss">    E = mc^2</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="ss">\]</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>と書く。</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">equation</span>}</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="ss">    E=mc^2 </span><span class="sc">\label</span><span class="ss">{eq:test}</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">equation</span>}</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>数式(<span class="kw">\ref</span>{<span class="ex">eq:test</span>})を参照のこと。</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}[htbp]</span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\centering</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">\includegraphics</span>[width=10cm]{<span class="ex">sin.pdf</span>}</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">\caption</span>{正弦波のグラフ。}</span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">\label</span>{<span class="ex">fig:sin</span>}</span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">figure</span>}</span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>正弦波のグラフを図<span class="fu">\ref</span>{fig:sin}に示す。</span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>本稿の執筆にはLaTeX<span class="fu">\cite</span>{okumura2020}を用いる。渡辺らは気泡生成のシミュレーションを行った<span class="fu">\cite</span>{watanabe2019}。</span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a><span class="co">%\begin{thebibliography}{99}</span></span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a><span class="co">%    \bibitem{okumura2020} 奥村 晴彦、黒木 裕介、LaTeX2ε美文書作成入門、技術評論社、2020.</span></span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a><span class="co">%\end{thebibliography}</span></span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a><span class="bu">\bibliographystyle</span>{<span class="ex">junsrt</span>}</span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a><span class="bu">\bibliography</span>{<span class="ex">reference</span>}</span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>ここに<code>\section</code>命令をいれよう。とりあえず「はじめに」「数式の入れ方」「図の入れ方」「参考文献の入れ方」の五つのセクションを以下のように入れてみよう。</p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">jarticle</span>}</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="bu">\usepackage</span>[dvipdfmx]{<span class="ex">graphicx</span>}</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{はじめに}</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>こんにちは。</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>さようなら。次の部分を<span class="fu">\textbf</span>{強調}します。</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{数式の入れ方}</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>文中の数式は<span class="ss">$E=mc^2$</span>のように書く。</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{図の入れ方}</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">figure</span>}[htbp]</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{参考文献の入れ方}</span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>本稿の執筆にはLaTeX<span class="fu">\cite</span>{okumura2020}を用いた。</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>この状態でビルドし、正しく節が設定されることを確認せよ。</p>
<h4 id="セクションの参照">セクションの参照</h4>
<p>セクションにもラベルをつけて参照できる。まずは先ほどのセクションに以下のようにラベルをつけよう。</p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{はじめに} <span class="kw">\label</span>{<span class="ex">sec:introduction</span>}</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{数式の入れ方} <span class="kw">\label</span>{<span class="ex">sec:equation</span>}</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{図の入れ方} <span class="kw">\label</span>{<span class="ex">sec:figure</span>}</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="kw">\section</span>{参考文献の入れ方} <span class="kw">\label</span>{<span class="ex">sec:reference</span>}</span></code></pre></div>
<p>一般に、イントロダクションの一番最後に論文の構成を記述することが多い。「はじめに」の最後、「数式の入れ方」の直前に以下の文章を記述し、コンパイルせよ。コピペしても良いが、VS
Codeから記述してラベルの補完を確認するとなお良い。</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>本論文の構成は以下の通り。まず第<span class="fu">\ref</span>{sec:equation}節にて数式の入れ方を述べる。次に第<span class="fu">\ref</span>{sec:figure}節にて図の入れ方を述べる。最後に第<span class="fu">\ref</span>{sec:reference}にて参考文献の入れ方を紹介した後、将来への展望について述べる。</span></code></pre></div>
<h4 id="目次">目次</h4>
<p>セクションがあると、目次も自動で作ることができる。<code>\begin{document}</code>の直後に</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\tableofcontents</span></span></code></pre></div>
<p>と入力してビルドしてみよ。目次が表示されるはずである。</p>
<h4 id="タイトルと著者">タイトルと著者</h4>
<p>タイトルや著者を設定することもできる。どこでも良いが、プリアンブル(<code>\begin{document}</code>の直前あたり)に以下を入力せよ。</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\title</span>{LaTeXのテスト}</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">\author</span>{自分の名前}</span></code></pre></div>
<p>そして、<code>\begin{document}</code>の直後、<code>\tableofcontents</code>の直前に以下を入力せよ。</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode tex"><code class="sourceCode latex"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">\maketitle</span></span></code></pre></div>
<p>タイトル、著者、日付が表示されたはずである。</p>
<h2 id="トラブル対応">トラブル対応</h2>
<p>LaTeXは参照の解決のため、何度もコンパイルが必要な場合がある。原則として<code>latexmk</code>が依存関係を自動認識し、必要な回数だけコンパイルしてくれるはずだが、何かの原因でビルドが止まらなくなったり、正しくビルドされなくなったりすることがある。</p>
<h3 id="ビルドが止まらなくなった場合">ビルドが止まらなくなった場合</h3>
<figure>
<img src="fig/terminate.png" alt="terminate.png" />
<figcaption aria-hidden="true">terminate.png</figcaption>
</figure>
<p>VS
Codeの左にある「TeX」をクリックする。するとLATEXのメニューが開くので、「Build
LaTeX Project」のメニュー左の「&gt;」をクリックして開き、「Terminate
current compilation」をクリックするとビルドが止まる。</p>
<h3
id="プレビューが更新されなくなった場合">プレビューが更新されなくなった場合</h3>
<figure>
<img src="fig/cleanup.png" alt="cleanup.png" />
<figcaption aria-hidden="true">cleanup.png</figcaption>
</figure>
<p>保存してビルドが走ってもプレビューが更新されない場合、中間ファイル(auxiliary)がおかしくなっている場合がある。その場合は「Clean
up auxiliary files」をクリックして、中間ファイルを削除してから「Build
LaTeX project」をクリックして再ビルドするとうまくいくことが多い。</p>
</article>
</body>
</html>
